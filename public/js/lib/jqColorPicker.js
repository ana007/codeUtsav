!function(o,t,e){"use strict";function r(t){return t.value||t.getAttribute("value")||o(t).css("background-color")||"#fff"}function i(o){return o.originalEvent.touches?o.originalEvent.touches[0]:o}function s(t){return o(t.find(x.doRender)[0]||t[0])}function n(t){var e=o(this),i=e.offset(),n=o(window),c=x.gap;t?(_=s(e),b.$trigger=e,(w||a()).css({left:(w[0]._left=i.left)-((w[0]._left=w[0]._left+w[0]._width-(n.scrollLeft()+n.width()))+c>0?w[0]._left+c:0),top:(w[0]._top=i.top+e.outerHeight())-((w[0]._top=w[0]._top+w[0]._height-(n.scrollTop()+n.height()))+c>0?w[0]._top+c:0)}).show(x.animationSpeed,function(){t!==!0&&(C._width=C.width(),m._width=m.width(),m._height=m.height(),v.setColor(r(_[0])),f(!0))})):o(w).hide(x.animationSpeed,function(){_.blur(),b.$trigger=null,f(!1)})}function a(){return o("head").append('<style type="text/css">'+(x.css||B)+(x.cssAddon||"")+"</style>"),b.$UI=w=o($).css({margin:x.margin}).appendTo("body").show(0,function(){var t=o(this);E=x.GPU&&t.css("perspective")!==e,m=o(".cp-xy-slider",this),k=o(".cp-xy-cursor",this),y=o(".cp-z-cursor",this),C=o(".cp-alpha",this).toggle(!!x.opacity),z=o(".cp-alpha-cursor",this),x.buildCallback.call(b,t),t.prepend("<div>").children().eq(0).css("width",t.children().eq(0).width()),this._width=this.offsetWidth,this._height=this.offsetHeight}).hide().on(M,".cp-xy-slider,.cp-z-slider,.cp-alpha",c)}function c(t){var e=this.className.replace(/cp-(.*?)(?:\s*|$)/,"$1").replace("-","_");t.preventDefault&&t.preventDefault(),t.returnValue=!1,_._offset=o(this).offset(),(e="xy_slider"===e?d:"z_slider"===e?h:p)(t),F.on(A,l).on(H,e)}function l(){F.off(H).off(A)}function d(o){var t=i(o),e=t.pageX-_._offset.left,r=t.pageY-_._offset.top;v.setColor({s:e/m._width*100,v:100-r/m._height*100},"hsv"),f()}function h(o){var t=i(o).pageY-_._offset.top;v.colors.hsv;v.setColor({h:360-t/m._height*360},"hsv"),f()}function p(o){var t=i(o).pageX-_._offset.left,e=t/C._width;v.setColor({},"rgb",e>1?1:0>e?0:e),f()}function f(o){var t=v.colors,r=t.hueRGB,i=t.RND.rgb,s=t.RND.hsl,n="#222",a="#ddd",c=_.data("colorMode"),l=1!==t.alpha,d=Math.round(100*t.alpha)/100,h=i.r+", "+i.g+", "+i.b,p="HEX"!==c||l?"rgb"===c||"HEX"===c&&l?l?"rgba("+h+", "+d+")":"rgb("+h+")":"hsl"+(l?"a(":"(")+s.h+", "+s.s+"%, "+s.l+"%"+(l?", "+d:"")+")":"#"+t.HEX,f=t.HUELuminance>.22?n:a,g=t.rgbaMixBlack.luminance>.22?n:a,b=(1-t.hsv.h)*m._height,x=t.hsv.s*m._width,w=(1-t.hsv.v)*m._height,F=d*C._width,R=E?"translate3d":"",H=_.val(),M=_[0].hasAttribute("value")&&""===H&&o!==e;m._css={backgroundColor:"rgb("+r.r+","+r.g+","+r.b+")"},k._css={transform:R+"("+x+"px, "+w+"px, 0)",left:E?"":x,top:E?"":w,borderColor:t.RGBLuminance>.22?n:a},y._css={transform:R+"(0, "+b+"px, 0)",top:E?"":b,borderColor:"transparent "+f},C._css={backgroundColor:"rgb("+h+")"},z._css={transform:R+"("+F+"px, 0, 0)",left:E?"":F,borderColor:g+" transparent"},_._css={backgroundColor:M?"":p,color:M?"":t.rgbaMixBGMixCustom.luminance>.22?n:a},_.text=M?"":H!==p?p:"",o!==e?u(o):G(u)}function u(o){m.css(m._css),k.css(k._css),y.css(y._css),C.css(C._css),z.css(z._css),x.doRender&&_.css(_._css),_.text&&_.val(_.text),x.renderCallback.call(b,_,"boolean"==typeof o?o:e)}var g,b,v,x,_,w,m,k,y,C,z,F=o(document),R="",H="touchmove.a mousemove.a pointermove.a",M="touchstart.a mousedown.a pointerdown.a",A="touchend.a mouseup.a pointerup.a",E=!1,G=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(o){o()},$='<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"></div></div><div class="cp-xy-slider"><div class="cp-white"></div><div class="cp-xy-cursor"></div></div><div class="cp-alpha"><div class="cp-alpha-cursor"></div></div></div>',B=".cp-color-picker{position:absolute;overflow:hidden;padding:6px 6px 0;background-color:#444;color:#bbb;font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:400;cursor:default;border-radius:5px}.cp-color-picker>div{position:relative;overflow:hidden}.cp-xy-slider{float:left;height:128px;width:128px;margin-bottom:6px;background:linear-gradient(to right,#FFF,rgba(255,255,255,0))}.cp-white{height:100%;width:100%;background:linear-gradient(rgba(0,0,0,0),#000)}.cp-xy-cursor{position:absolute;top:0;width:10px;height:10px;margin:-5px;border:1px solid #fff;border-radius:100%;box-sizing:border-box}.cp-z-slider{float:right;margin-left:6px;height:128px;width:20px;background:linear-gradient(red 0,#f0f 17%,#00f 33%,#0ff 50%,#0f0 67%,#ff0 83%,red 100%)}.cp-z-cursor{position:absolute;margin-top:-4px;width:100%;border:4px solid #fff;border-color:transparent #fff;box-sizing:border-box}.cp-alpha{clear:both;width:100%;height:16px;margin:6px 0;background:linear-gradient(to right,#444,rgba(0,0,0,0))}.cp-alpha-cursor{position:absolute;margin-left:-4px;height:100%;border:4px solid #fff;border-color:#fff transparent;box-sizing:border-box}",X=function(o){v=this.color=new t(o),x=v.options};X.prototype={render:f,toggle:n},o.fn.colorPicker=function(t){var e=function(){};return t=o.extend({animationSpeed:150,GPU:!0,doRender:!0,customBG:"#FFF",opacity:!0,renderCallback:e,buildCallback:e,body:document.body,scrollResize:!0,gap:4},t),!b&&t.scrollResize&&o(window).on("resize scroll",function(){b.$trigger&&b.toggle.call(b.$trigger[0],!0)}),g=g?g.add(this):this,g.colorPicker=b||(b=new X(t)),R+=(R?", ":"")+this.selector,o(t.body).off(".a").on(M,function(t){var e=o(t.target);-1!==o.inArray(e.closest(R)[0],g)||e.closest(w).length||n()}).on("focus.a click.a",R,n).on("change.a",R,function(){v.setColor(this.value||"#FFF"),g.colorPicker.render(!0)}),this.each(function(){var e=r(this),i=e.split("("),n=s(o(this));n.data("colorMode",i[1]?i[0].substr(0,3):"HEX").attr("readonly",x.preventFocus),t.doRender&&n.css({"background-color":e,color:function(){return v.setColor(e).rgbaMixBGMixCustom.luminance>.22?"#222":"#ddd"}})})}}(jQuery,Colors);