!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery||window.Zepto)}(function(t){"use strict";var e=function(e,a,n){var r,o,s=this;e=t(e),a="function"==typeof a?a(e.val(),void 0,e,n):a,s.init=function(){n=n||{},s.byPassKeys=[9,16,17,18,36,37,38,39,40,91],s.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}},s.translation=t.extend({},s.translation,n.translation),s=t.extend(!0,{},s,n),o=i.getRegexMask(),e.each(function(){n.maxlength!==!1&&e.attr("maxlength",a.length),n.placeholder&&e.attr("placeholder",n.placeholder),e.attr("autocomplete","off"),i.destroyEvents(),i.events();var t=i.getCaret();i.val(i.getMasked()),i.setCaret(t+i.getMaskCharactersBeforeCount(t,!0))})};var i={getCaret:function(){var t,a=0,n=e.get(0),r=document.selection,o=n.selectionStart;return r&&!~navigator.appVersion.indexOf("MSIE 10")?(t=r.createRange(),t.moveStart("character",e.is("input")?-e.val().length:-e.text().length),a=t.text.length):(o||"0"===o)&&(a=o),a},setCaret:function(t){if(e.is(":focus")){var a,n=e.get(0);n.setSelectionRange?n.setSelectionRange(t,t):n.createTextRange&&(a=n.createTextRange(),a.collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select())}},events:function(){e.on("keydown.mask",function(){r=i.val()}),e.on("keyup.mask",i.behaviour),e.on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}),e.on("change.mask",function(){e.data("changeCalled",!0)}),e.on("blur.mask",function(e){var a=t(e.target);a.prop("defaultValue")!==a.val()&&(a.prop("defaultValue",a.val()),a.data("changeCalled")||a.trigger("change")),a.data("changeCalled",!1)}),e.on("focusout.mask",function(){n.clearIfNotMatch&&!o.test(i.val())&&i.val("")})},getRegexMask:function(){for(var t,e,n,r,o,i,c=[],l=0;l<a.length;l++)t=s.translation[a[l]],t?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=t.optional,r=t.recursive,r?(c.push(a[l]),o={digit:a[l],pattern:e}):c.push(n||r?e+"?":e)):c.push("\\"+a[l]);return i=c.join(""),o&&(i=i.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(i)},destroyEvents:function(){e.off("keydown.mask keyup.mask paste.mask drop.mask change.mask blur.mask focusout.mask").removeData("changeCalled")},val:function(t){var a=e.is("input");return arguments.length>0?a?e.val(t):e.text(t):a?e.val():e.text()},getMaskCharactersBeforeCount:function(t,e){for(var n=0,r=0,o=a.length;o>r&&t>r;r++)s.translation[a.charAt(r)]||(t=e?t+1:t,n++);return n},determineCaretPos:function(t,e,n,r){var o=s.translation[a.charAt(Math.min(t-1,a.length-1))];return o?Math.min(t+n-e-r,n):i.determineCaretPos(t+1,e,n,r)},behaviour:function(e){e=e||window.event;var a=e.keyCode||e.which;if(-1===t.inArray(a,s.byPassKeys)){var n=i.getCaret(),r=i.val(),o=r.length,c=o>n,l=i.getMasked(),u=l.length,h=i.getMaskCharactersBeforeCount(u-1)-i.getMaskCharactersBeforeCount(o-1);return l!==r&&i.val(l),!c||65===a&&e.ctrlKey||(8!==a&&46!==a&&(n=i.determineCaretPos(n,o,u,h)),i.setCaret(n)),i.callbacks(e)}},getMasked:function(t){var e,r,o=[],c=i.val(),l=0,u=a.length,h=0,f=c.length,g=1,v="push",d=-1;for(n.reverse?(v="unshift",g=-1,e=0,l=u-1,h=f-1,r=function(){return l>-1&&h>-1}):(e=u-1,r=function(){return u>l&&f>h});r();){var p=a.charAt(l),m=c.charAt(h),k=s.translation[p];k?(m.match(k.pattern)?(o[v](m),k.recursive&&(-1===d?d=l:l===e&&(l=d-g),e===d&&(l-=g)),l+=g):k.optional&&(l+=g,h-=g),h+=g):(t||o[v](p),m===p&&(h+=g),l+=g)}var C=a.charAt(e);return u!==f+1||s.translation[C]||o.push(C),o.join("")},callbacks:function(t){var o=i.val(),s=i.val()!==r;s===!0&&"function"==typeof n.onChange&&n.onChange(o,t,e,n),s===!0&&"function"==typeof n.onKeyPress&&n.onKeyPress(o,t,e,n),"function"==typeof n.onComplete&&o.length===a.length&&n.onComplete(o,t,e,n)}};s.remove=function(){var t=i.getCaret(),e=i.getMaskCharactersBeforeCount(t);i.destroyEvents(),i.val(s.getCleanVal()).removeAttr("maxlength"),i.setCaret(t-e)},s.getCleanVal=function(){return i.getMasked(!0)},s.init()};t.fn.mask=function(a,n){return this.unmask(),this.each(function(){t(this).data("mask",new e(this,a,n))})},t.fn.unmask=function(){return this.each(function(){try{t(this).data("mask").remove()}catch(e){}})},t.fn.cleanVal=function(){return t(this).data("mask").getCleanVal()},t("*[data-mask]").each(function(){var e=t(this),a={},n="data-mask-";"true"===e.attr(n+"reverse")&&(a.reverse=!0),"false"===e.attr(n+"maxlength")&&(a.maxlength=!1),"true"===e.attr(n+"clearifnotmatch")&&(a.clearIfNotMatch=!0),e.mask(e.attr("data-mask"),a)})});